package ru.r2cloud.jradio.beesat4;

import static com.google.code.beanmatchers.BeanMatchers.hasValidBeanConstructor;
import static com.google.code.beanmatchers.BeanMatchers.hasValidGettersAndSetters;
import static org.hamcrest.CoreMatchers.allOf;
import static org.hamcrest.MatcherAssert.assertThat;

import java.io.ByteArrayInputStream;
import java.io.DataInputStream;

import org.junit.Test;

import ru.r2cloud.jradio.AssertJson;
import ru.r2cloud.jradio.fec.ViterbiTest;

public class Beesat4BeaconTest {

	@Test
	public void testSuccess() throws Exception {
		byte[] data = ViterbiTest.hexStringToByteArray(
				"1ACFFC1D0B20481818000000C64B007DBE23317F30E19689542E04B81488344355AD3C0180C5000003000000006D7D000B43ED2786A0002711E001000100C00000008BCAC02680186340B0E7C000000000003C2EC1F1F83A4412C283F90FB99BBE5F055B3FB18000000000000200149B19DC11440311A50360095604C5F6EE046818EE09F6019218EE017A52710FC1351ACFFC1D0B20491918000001C2C2007D0FB49E1A801FB860903002DFE4FEFFEB7EE7C27C17AEFCEFB37C37B7FBFECD64BF1E588FF5FF8FF5FF9DB2755E5A732F6A58A4AFACC843B7DE2F92CECC68328815E022F850E7F4380000000000000000000000000001784800000200000000000000000007D5B0197FFE7FFFFFFFFFFFFC9800000000000000000000000710721ACFFC1D0B204A1A18000002C2C2007DBE2262E61F2D2A840961490D100D5003006207462BC7DA4F0D40004E23C0000C000000030018D1A50360090065604C51B313714000DB6FAE637D00006500000000000834501370F5394F302D03102F1F3344F7198D47E567E7B722A12200B0F00F00EB0CF0080040F900449F0EE22B8276000000000218041999A11AC796201E1ACFFC1D0B204B1B18000007C279007DDFF2E03767818A856851E3A66433C8EA4FB7C85DDBF8A60DE05971651D80473DB8331D11C9E7DA5809A2C6028768CECFE2D887A6F3FA041FE34FEB6E7A8A68885629BDD9AE3C2CFD8D5C69D748A5F6370D7637D58B8A070ECE02D3E2218BE91C39C40002B4293435D7C1D7CD9B49FDB322CD72FAE87A5BF4B4293435FFFF9603");
		Beesat4Beacon beacon = new Beesat4Beacon();
		beacon.readBeacon(new DataInputStream(new ByteArrayInputStream(data)));
		AssertJson.assertObjectsEqual("Beesat4Beacon.json", beacon);
	}
	
	@Test
	public void testPojo() {
		assertThat(Apid0.class, allOf(hasValidBeanConstructor(), hasValidGettersAndSetters()));
		assertThat(Apid1.class, allOf(hasValidBeanConstructor(), hasValidGettersAndSetters()));
		assertThat(Apid2.class, allOf(hasValidBeanConstructor(), hasValidGettersAndSetters()));
	}
			
}
